<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Admission Form</title>

    <!-- Bootstrap css cdn -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css">

    <!-- Font Awesome Pro -->
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.4.2/css/all.css">

    <style>
        /* Custom CSS */
        @media (max-width: 767.98px) {
            .container {
                padding-left: 10px;
                padding-right: 10px;
                max-width: 100%;
            }

            .card {
                padding: 15px !important;
            }

            /* Mobile-optimized dropdown */
            .noOfStdDropdown {
                flex-direction: column;
                align-items: flex-start !important;
            }

            .noOfStdDropdown select {
                width: 100% !important;
                margin-top: 8px;
            }

            /* Mobile-optimized student boxes */
            .student-boxes-container {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
        }

        /* Responsive student boxes for larger screens */
        @media (min-width: 768px) {
            .student-boxes-container {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }

            .noOfStdBox {
                margin-bottom: 10px;
            }
        }

        /* Base styles */
        .noOfStdBox {
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px 15px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .noOfStdBox:hover {
            background-color: #e0e0e0;
        }

        .noOfStdBox.active {
            background-color: #007bff;
            color: white;
        }
    </style>
</head>

<body>
    <div class="container my-3 my-md-5">
        <div class="card shadow p-3 p-md-4">
            <h2 class="text-center mb-4 fw-bold fs-3 fs-md-2">Student Admission Form</h2>

            <!-- Number of Students Dropdown -->
            <div class="mb-4 noOfStdDropdown d-flex align-items-center gap-3">
                <label for="studentCount" class="form-label fw-semibold">Number of Students:</label>
                <select id="studentCount" class="form-select">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>
            </div>

            <!-- no of student boxes -->
            <div class="student-boxes-container">
                <button type="button" id="std1" class="noOfStdBox active">Student 1</button>
                <button type="button" id="std2" class="noOfStdBox">Student 2</button>
                <button type="button" id="std3" class="noOfStdBox">Student 3</button>
                <button type="button" id="std4" class="noOfStdBox">Student 4</button>
                <button type="button" id="std5" class="noOfStdBox">Student 5</button>
                <button type="button" id="std6" class="noOfStdBox">Student 6</button>
                <button type="button" id="std7" class="noOfStdBox">Student 7</button>
                <button type="button" id="std8" class="noOfStdBox">Student 8</button>
                <button type="button" id="std9" class="noOfStdBox">Student 9</button>
                <button type="button" id="std10" class="noOfStdBox">Student 10</button>
            </div>

            <h6 class="text-center my-3 fs-5">Student 1 to 1</h6>

            <div id="studentForms" class="mt-3">
                <div class="student-form mb-5 border p-3 p-md-4 rounded">
                    <h5 class="fw-bold mb-3">Student 1 Information</h5>

                    <div class="row mb-4">
                        <div class="col-md-6 mb-3 mb-md-0">
                            <label class="form-label">Student Name <sup class="text-danger">*</sup></label>
                            <input type="text" class="form-control" name="studentName[]" id="studentName_1">
                            <span id="studentNameError_1" class="text-danger"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Father's Name <sup class="text-danger">*</sup></label>
                            <input type="text" class="form-control" name="fatherName[]" id="fatherName_1">
                            <span id="fatherNameError_1" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label class="form-label d-block">Gender <sup class="text-danger">*</sup></label>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender[0]" id="genderMale_1"
                                value="Male">
                            <label class="form-check-label" for="genderMale_1">Male</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender[0]" id="genderFemale_1"
                                value="Female">
                            <label class="form-check-label" for="genderFemale_1">Female</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender[0]" id="genderOther_1"
                                value="Other">
                            <label class="form-check-label" for="genderOther_1">Other</label>
                        </div>
                        <span id="genderError_1" class="text-danger"></span>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6 mb-3 mb-md-0">
                            <label class="form-label">Admission Date <sup class="text-danger">*</sup></label>
                            <input type="date" class="form-control" name="admissionDate[]" id="admissionDate_1">
                            <span id="admissionDateError_1" class="text-danger"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Admission/Readmission <sup class="text-danger">*</sup></label>
                            <select class="form-select" name="admissionType[]" id="admissionType_1">
                                <option disabled selected>Select Type</option>
                                <option value="Admission">Admission</option>
                                <option value="Readmission">Readmission</option>
                            </select>
                            <span id="admissionTypeError_1" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6 mb-3 mb-md-0">
                            <label class="form-label">School Type <sup class="text-danger">*</sup></label>
                            <select class="form-select" name="schoolType[]" id="schoolType_1">
                                <option value="">Select School Type</option>
                                <option value="Government">Government</option>
                                <option value="Public">Public</option>
                                <option value="Private">Private</option>
                                <option value="Angad Wadi Scheme">Angad Wadi Scheme</option>
                            </select>
                            <span id="schoolTypeError_1" class="text-danger"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Class <sup class="text-danger">*</sup></label>
                            <select class="form-select" name="class[]" id="studentClass_1">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>
                            <span id="studentClassError_1" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6 mb-3 mb-md-0">
                            <label class="form-label">City <sup class="text-danger">*</sup></label>
                            <select class="form-select" name="city[]" id="city_1">
                                <option disabled selected>Select City</option>
                                <option value="Abohar">Abohar</option>
                                <option value="Adipur">Adipur</option>
                                <option value="Agra">Agra</option>
                                <option value="Ahmedabad">Ahmedabad</option>
                                <option value="Ajmer">Ajmer</option>
                                <option value="Akkalkot">Akkalkot</option>
                                <option value="Akola">Akola</option>
                                <option value="Aligarh">Aligarh</option>
                                <option value="Alwar">Alwar</option>
                                <option value="Amalapuram">Amalapuram</option>
                                <option value="Ambala">Ambala</option>
                                <option value="Amaravati">Amaravati</option>
                                <option value="Amritsar">Amritsar</option>
                                <option value="Asansol">Asansol</option>
                                <option value="Ashok nagar">Ashok nagar</option>
                                <option value="Azamgarh">Azamgarh</option>
                                <option value="Badal">Badal</option>
                                <option value="Badnawar">Badnawar</option>
                                <option value="Bahadurgarh">Bahadurgarh</option>
                                <option value="Balasore">Balasore</option>
                                <option value="Ballia">Ballia</option>
                                <option value="Bangalore">Bangalore</option>
                                <option value="Barwani">Barwani</option>
                                <option value="Barwara">Barwara</option>
                                <option value="Bathinda">Bathinda</option>
                                <option value="Berhampur">Berhampur</option>
                                <option value="Bhagalpur">Bhagalpur</option>
                                <option value="Bharatpur">Bharatpur</option>
                                <option value="Bhavnagar">Bhavnagar</option>
                                <option value="Bhilai">Bhilai</option>
                                <option value="Bhilwara">Bhilwara</option>
                                <option value="Bhiwadi">Bhiwadi</option>
                                <option value="Bhopal">Bhopal</option>
                                <option value="Bhuj">Bhuj</option>
                                <option value="Bhubaneswar">Bhubaneswar</option>
                                <option value="Bijnor">Bijnor</option>
                                <option value="Bikaner">Bikaner</option>
                                <option value="Bilasipara">Bilasipara</option>
                                <option value="Bina">Bina</option>
                                <option value="Bishnupur">Bishnupur</option>
                                <option value="Bokaro">Bokaro</option>
                                <option value="Bongaigaon">Bongaigaon</option>
                                <option value="Botad">Botad</option>
                                <option value="Burdwan">Burdwan</option>
                                <option value="Burhanpur">Burhanpur</option>
                                <option value="Calicut">Calicut</option>
                                <option value="Chandigarh">Chandigarh</option>
                                <option value="Chennai">Chennai</option>
                                <option value="Chhatarpur">Chhatarpur</option>
                                <option value="Chhatrapati Sambhaji Nagar">Chhatrapati Sambhaji Nagar</option>
                                <option value="Chhindwara">Chhindwara</option>
                                <option value="Chomu">Chomu</option>
                                <option value="Churu">Churu</option>
                                <option value="Cuttack">Cuttack</option>
                                <option value="Datia">Datia</option>
                                <option value="Dehradun">Dehradun</option>
                                <option value="Delhi">Delhi</option>
                                <option value="Deoghar">Deoghar</option>
                                <option value="Dewas">Dewas</option>
                                <option value="Dhanbad">Dhanbad</option>
                                <option value="Dharmanagar">Dharmanagar</option>
                                <option value="Dhubri">Dhubri</option>
                                <option value="Dibrugarh">Dibrugarh</option>
                                <option value="Duliajan">Duliajan</option>
                                <option value="Durgapur">Durgapur</option>
                                <option value="Faridabad">Faridabad</option>
                                <option value="Fazilka">Fazilka</option>
                                <option value="Firozpur">Firozpur</option>
                                <option value="Ghaziabad">Ghaziabad</option>
                                <option value="Goalpara">Goalpara</option>
                                <option value="Gohana">Gohana</option>
                                <option value="Gondia">Gondia</option>
                                <option value="Gorakhpur">Gorakhpur</option>
                                <option value="Greater Noida">Greater Noida</option>
                                <option value="Guna">Guna</option>
                                <option value="Gurgaon">Gurgaon</option>
                                <option value="Guwahati">Guwahati</option>
                                <option value="Gwalior">Gwalior</option>
                                <option value="Hapur">Hapur</option>
                                <option value="Harda">Harda</option>
                                <option value="Hardoi">Hardoi</option>
                                <option value="Haridwar">Haridwar</option>
                                <option value="Hisar">Hisar</option>
                                <option value="Hojai">Hojai</option>
                                <option value="Hubli">Hubli</option>
                                <option value="Hyderabad">Hyderabad</option>
                                <option value="Ichchalkaranji">Ichchalkaranji</option>
                                <option value="Indore">Indore</option>
                                <option value="Itarsi">Itarsi</option>
                                <option value="Jabalpur">Jabalpur</option>
                                <option value="Jaipur">Jaipur</option>
                                <option value="Jaisalmer">Jaisalmer</option>
                                <option value="Jalandhar">Jalandhar</option>
                                <option value="Jalgaon">Jalgaon</option>
                                <option value="Jalpaiguri">Jalpaiguri</option>
                                <option value="Jammu">Jammu</option>
                                <option value="Jamshedpur">Jamshedpur</option>
                                <option value="Jhansi">Jhansi</option>
                                <option value="Jhajjar">Jhajjar</option>
                                <option value="Jhalawar">Jhalawar</option>
                                <option value="Jharsuguda">Jharsuguda</option>
                                <option value="Jhunjhunu">Jhunjhunu</option>
                                <option value="Jodhpur">Jodhpur</option>
                                <option value="Junagadh">Junagadh</option>
                                <option value="Kakinada">Kakinada</option>
                                <option value="Kalaburagi">Kalaburagi</option>
                                <option value="Kanpur">Kanpur</option>
                                <option value="Kapurthala">Kapurthala</option>
                                <option value="Karimnagar">Karimnagar</option>
                                <option value="Karimganj">Karimganj</option>
                                <option value="Karnal">Karnal</option>
                                <option value="Kashipur">Kashipur</option>
                                <option value="Katni">Katni</option>
                                <option value="Khandwa">Khandwa</option>
                                <option value="Kokrajhar">Kokrajhar</option>
                                <option value="Kolhapur">Kolhapur</option>
                                <option value="Kolkata">Kolkata</option>
                                <option value="Kota">Kota</option>
                                <option value="Kotputli">Kotputli</option>
                                <option value="Kurukshetra">Kurukshetra</option>
                                <option value="Latur">Latur</option>
                                <option value="Lonavala">Lonavala</option>
                                <option value="Lucknow">Lucknow</option>
                                <option value="Mandi">Mandi</option>
                                <option value="Mangalore">Mangalore</option>
                                <option value="Manesar">Manesar</option>
                                <option value="Mathura">Mathura</option>
                                <option value="Meerut">Meerut</option>
                                <option value="Mirzapur">Mirzapur</option>
                                <option value="Modinagar">Modinagar</option>
                                <option value="Mohammadi">Mohammadi</option>
                                <option value="Moradabad">Moradabad</option>
                                <option value="Moranhat">Moranhat</option>
                                <option value="Morbi">Morbi</option>
                                <option value="Mumbai">Mumbai</option>
                                <option value="Muzaffarpur">Muzaffarpur</option>
                                <option value="Mysore">Mysore</option>
                                <option value="Nagpur">Nagpur</option>
                                <option value="Nalanda">Nalanda</option>
                                <option value="Nalbari">Nalbari</option>
                                <option value="Narsinghpur">Narsinghpur</option>
                                <option value="Nashik">Nashik</option>
                                <option value="Navsari">Navsari</option>
                                <option value="Nellore">Nellore</option>
                                <option value="Noida">Noida</option>
                                <option value="Panbari">Panbari</option>
                                <option value="Pandharpur">Pandharpur</option>
                                <option value="Panipat">Panipat</option>
                                <option value="Patan">Patan</option>
                                <option value="Patiala">Patiala</option>
                                <option value="Patna">Patna</option>
                                <option value="Prayagraj">Prayagraj</option>
                                <option value="Pukhrayan">Pukhrayan</option>
                                <option value="Pune">Pune</option>
                                <option value="Raipur">Raipur</option>
                                <option value="Rajkot">Rajkot</option>
                                <option value="Ramganj Mandi">Ramganj Mandi</option>
                                <option value="Ranchi">Ranchi</option>
                                <option value="Ratlam">Ratlam</option>
                                <option value="Rewari">Rewari</option>
                                <option value="Rewa">Rewa</option>
                                <option value="Rishikesh">Rishikesh</option>
                                <option value="Rohtak">Rohtak</option>
                                <option value="Rourkela">Rourkela</option>
                                <option value="Rudrapur">Rudrapur</option>
                                <option value="Sagar">Sagar</option>
                                <option value="Sambalpur">Sambalpur</option>
                                <option value="Sangli">Sangli</option>
                                <option value="Sapatgram">Sapatgram</option>
                                <option value="Shahjahanpur">Shahjahanpur</option>
                                <option value="Shajapur">Shajapur</option>
                                <option value="Shamli">Shamli</option>
                                <option value="Shillong">Shillong</option>
                                <option value="Shimla">Shimla</option>
                                <option value="Sikar">Sikar</option>
                                <option value="Silchar">Silchar</option>
                                <option value="Siliguri">Siliguri</option>
                                <option value="Sirsa">Sirsa</option>
                                <option value="Sivasagar">Sivasagar</option>
                                <option value="Solapur">Solapur</option>
                                <option value="Sonipat">Sonipat</option>
                                <option value="Sriganganagar">Sriganganagar</option>
                                <option value="Surat">Surat</option>
                                <option value="Thrissur">Thrissur</option>
                                <option value="Tinsukia">Tinsukia</option>
                                <option value="Udaipur">Udaipur</option>
                                <option value="Udupi">Udupi</option>
                                <option value="Ujjain">Ujjain</option>
                                <option value="Vadodara">Vadodara</option>
                                <option value="Valsad">Valsad</option>
                                <option value="Vapi">Vapi</option>
                                <option value="Varanasi">Varanasi</option>
                                <option value="Vijayawada">Vijayawada</option>
                                <option value="Vizag">Vizag</option>
                                <option value="Yamunanagar">Yamunanagar</option>
                            </select>
                            <span id="cityError_1" class="text-danger"></span>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">State <sup class="text-danger">*</sup></label>
                            <select class="form-select" name="state[]" id="state_1">
                                <option disabled selected>Select State</option>
                                <option value="Andhra Pradesh">Andhra Pradesh</option>
                                <option value="Assam">Assam</option>
                                <option value="Bihar">Bihar</option>
                                <option value="Chandigarh">Chandigarh</option>
                                <option value="Chhattisgarh">Chhattisgarh</option>
                                <option value="Delhi">Delhi</option>
                                <option value="Gujarat">Gujarat</option>
                                <option value="Haryana">Haryana</option>
                                <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                <option value="Jharkhand">Jharkhand</option>
                                <option value="Karnataka">Karnataka</option>
                                <option value="Kerala">Kerala</option>
                                <option value="Madhya Pradesh">Madhya Pradesh</option>
                                <option value="Madhyapradesh">Madhyapradesh</option>
                                <option value="Maharashtra">Maharashtra</option>
                                <option value="Meghalaya">Meghalaya</option>
                                <option value="Odisha">Odisha</option>
                                <option value="Punjab">Punjab</option>
                                <option value="Rajasthan">Rajasthan</option>
                                <option value="Tamil Nadu">Tamil Nadu</option>
                                <option value="Telangana">Telangana</option>
                                <option value="Tripura">Tripura</option>
                                <option value="Uttar Pradesh">Uttar Pradesh</option>
                                <option value="Uttarakhand">Uttarakhand</option>
                                <option value="Uttarpradesh">Uttarpradesh</option>
                                <option value="West Bengal">West Bengal</option>
                            </select>
                            <span id="stateError_1" class="text-danger"></span>
                        </div>
                    </div>

                    <!-- Zone field -->
                    <div class="mb-4">
                        <label class="form-label">Zone <sup class="text-danger">*</sup></label>
                        <select class="form-select" name="zone[]" id="zone_1">
                            <option disabled selected>Select Zone</option>
                            <option value="East">East</option>
                            <option value="West">West</option>
                            <option value="North">North</option>
                            <option value="South">South</option>
                            <option value="Powerplayers">Powerplayers</option>
                        </select>
                        <span id="zoneError_1" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <!-- previous and next -->
            <div class="d-flex justify-content-between">
                <button class="btn btn-danger">Previous</button>
                <button class="btn btn-success">Next</button>
            </div>

            <!-- Buttons -->
            <div class="d-flex justify-content-between mt-4">
                <button class="btn btn-secondary">Reset</button>
                <button class="btn btn-primary">Submit All</button>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom js -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Student boxes functionality
            const studentBoxes = document.querySelectorAll('.noOfStdBox');
            const studentCount = document.getElementById('studentCount');

            // Initially show only first student box (default value 1)
            for (let i = 0; i < studentBoxes.length; i++) {
                if (i > 0) {
                    studentBoxes[i].style.display = 'none';
                }
            }

            // Show boxes based on selection
            studentCount.addEventListener('change', function () {
                const count = parseInt(this.value);

                studentBoxes.forEach((box, index) => {
                    if (index < count) {
                        box.style.display = '';
                    } else {
                        box.style.display = 'none';
                    }
                });

                // Update active state
                updateActiveState(0);
            });

            // Add click event for each student box
            studentBoxes.forEach((box, index) => {
                box.addEventListener('click', function () {
                    updateActiveState(index);
                    // Update the heading
                    document.querySelector('h6.text-center.my-3.fs-5').textContent = `Student ${index + 1} to ${studentCount.value}`;
                });
            });

            function updateActiveState(activeIndex) {
                studentBoxes.forEach((box, idx) => {
                    if (idx === activeIndex) {
                        box.classList.add('active');
                    } else {
                        box.classList.remove('active');
                    }
                });
            }
        });

        document.addEventListener('DOMContentLoaded', function () {
            // Student boxes functionality
            const studentBoxes = document.querySelectorAll('.noOfStdBox');
            const studentCount = document.getElementById('studentCount');
            const previousBtn = document.querySelector('.btn-danger');  // Previous button
            const nextBtn = document.querySelector('.btn-success');     // Next button
            const studentFormsContainer = document.getElementById('studentForms');
            const statusHeading = document.querySelector('h6.text-center.my-3.fs-5');

            let currentStudentIndex = 0;  // Track current student

            // Initially hide Previous and Next buttons if only 1 student
            updateNavigationButtons();

            // Show boxes based on selection
            studentCount.addEventListener('change', function () {
                const count = parseInt(this.value);

                studentBoxes.forEach((box, index) => {
                    if (index < count) {
                        box.style.display = '';
                    } else {
                        box.style.display = 'none';
                    }
                });

                // Reset to first student
                currentStudentIndex = 0;
                updateActiveState(currentStudentIndex);
                updateNavigationButtons();
                updateStatusHeading();
            });

            // Add click event for each student box
            studentBoxes.forEach((box, index) => {
                box.addEventListener('click', function () {
                    currentStudentIndex = index;
                    updateActiveState(currentStudentIndex);
                    updateNavigationButtons();
                    updateStatusHeading();
                });
            });

            // Previous button click event
            previousBtn.addEventListener('click', function (e) {
                e.preventDefault();
                if (currentStudentIndex > 0) {
                    currentStudentIndex--;
                    updateActiveState(currentStudentIndex);
                    updateNavigationButtons();
                    updateStatusHeading();
                }
            });

            // Next button click event
            nextBtn.addEventListener('click', function (e) {
                e.preventDefault();
                const maxIndex = parseInt(studentCount.value) - 1;
                if (currentStudentIndex < maxIndex) {
                    currentStudentIndex++;
                    updateActiveState(currentStudentIndex);
                    updateNavigationButtons();
                    updateStatusHeading();
                }
            });

            function updateActiveState(activeIndex) {
                studentBoxes.forEach((box, idx) => {
                    if (idx === activeIndex) {
                        box.classList.add('active');
                    } else {
                        box.classList.remove('active');
                    }
                });
            }

            function updateNavigationButtons() {
                const count = parseInt(studentCount.value);

                // Hide both buttons if only one student
                if (count <= 1) {
                    previousBtn.style.display = 'none';
                    nextBtn.style.display = 'none';
                    return;
                }

                // Show/hide Previous button based on current student
                previousBtn.style.display = currentStudentIndex === 0 ? 'none' : '';

                // Show/hide Next button based on current student
                nextBtn.style.display = currentStudentIndex === count - 1 ? 'none' : '';
            }

            function updateStatusHeading() {
                const count = parseInt(studentCount.value);
                statusHeading.textContent = `Student ${currentStudentIndex + 1} of ${count}`;
            }

            // Initialize the form
            updateActiveState(0);
            updateStatusHeading();
        });

        document.addEventListener('DOMContentLoaded', function () {
            // Student boxes functionality
            const studentBoxes = document.querySelectorAll('.noOfStdBox');
            const studentCount = document.getElementById('studentCount');
            const previousBtn = document.querySelector('.btn-danger');  // Previous button
            const nextBtn = document.querySelector('.btn-success');     // Next button
            const resetBtn = document.querySelector('.btn-secondary');  // Reset button
            const submitBtn = document.querySelector('.btn-primary');   // Submit All button
            const studentFormsContainer = document.getElementById('studentForms');
            const statusHeading = document.querySelector('h6.text-center.my-3.fs-5');

            let currentStudentIndex = 0;  // Track current student
            let studentForms = [];        // Store created student forms

            // Initialize the first student form
            createStudentForm(1);

            // Initially hide Previous and Next buttons if only 1 student
            updateNavigationButtons();

            // Show boxes based on selection
            studentCount.addEventListener('change', function () {
                const count = parseInt(this.value);

                // Create any missing student forms
                for (let i = studentForms.length + 1; i <= count; i++) {
                    createStudentForm(i);
                }

                studentBoxes.forEach((box, index) => {
                    if (index < count) {
                        box.style.display = '';
                    } else {
                        box.style.display = 'none';
                    }
                });

                // Reset to first student
                currentStudentIndex = 0;
                updateActiveState(currentStudentIndex);
                updateNavigationButtons();
                updateStatusHeading();
                showCurrentStudentForm();
            });

            // Add click event for each student box
            studentBoxes.forEach((box, index) => {
                box.addEventListener('click', function () {
                    // Validate current form before switching to another student
                    if (index !== currentStudentIndex) {
                        if (validateCurrentForm()) {
                            currentStudentIndex = index;
                            updateActiveState(currentStudentIndex);
                            updateNavigationButtons();
                            updateStatusHeading();
                            showCurrentStudentForm();
                        } else {
                            // If validation fails, keep on current student
                            alert("Please complete all required fields for the current student before proceeding.");
                        }
                    }
                });
            });

            // Previous button click event
            previousBtn.addEventListener('click', function (e) {
                e.preventDefault();
                if (currentStudentIndex > 0) {
                    if (validateCurrentForm()) {
                        currentStudentIndex--;
                        updateActiveState(currentStudentIndex);
                        updateNavigationButtons();
                        updateStatusHeading();
                        showCurrentStudentForm();
                    } else {
                        alert("Please complete all required fields for the current student before proceeding.");
                    }
                }
            });

            // Next button click event
            nextBtn.addEventListener('click', function (e) {
                e.preventDefault();
                const maxIndex = parseInt(studentCount.value) - 1;
                if (currentStudentIndex < maxIndex) {
                    if (validateCurrentForm()) {
                        currentStudentIndex++;
                        updateActiveState(currentStudentIndex);
                        updateNavigationButtons();
                        updateStatusHeading();
                        showCurrentStudentForm();
                    } else {
                        alert("Please complete all required fields for the current student before proceeding.");
                    }
                }
            });

            // Reset button click event
            resetBtn.addEventListener('click', function (e) {
                e.preventDefault();
                if (confirm("Are you sure you want to reset all form data?")) {
                    // Reset all forms
                    studentForms.forEach(form => {
                        form.querySelectorAll('input[type="text"], input[type="date"]').forEach(input => {
                            input.value = '';
                        });
                        form.querySelectorAll('select').forEach(select => {
                            select.selectedIndex = 0;
                        });
                        form.querySelectorAll('input[type="radio"]').forEach(radio => {
                            radio.checked = false;
                        });

                        // Clear all error messages
                        form.querySelectorAll('.text-danger').forEach(span => {
                            span.textContent = '';
                        });
                    });

                    // Reset to first student
                    currentStudentIndex = 0;
                    updateActiveState(currentStudentIndex);
                    updateNavigationButtons();
                    updateStatusHeading();
                    showCurrentStudentForm();
                }
            });

            // Submit All button click event
            submitBtn.addEventListener('click', function (e) {
                e.preventDefault();
                const count = parseInt(studentCount.value);
                let allValid = true;

                // Save current form values
                validateCurrentForm();

                // Validate all student forms
                for (let i = 0; i < count; i++) {
                    const isCurrentFormValid = validateForm(i + 1);
                    if (!isCurrentFormValid) {
                        allValid = false;
                        if (i !== currentStudentIndex) {
                            // Switch to the invalid form
                            currentStudentIndex = i;
                            updateActiveState(currentStudentIndex);
                            updateNavigationButtons();
                            updateStatusHeading();
                            showCurrentStudentForm();
                        }
                        break;
                    }
                }

                if (allValid) {
                    alert("All forms are valid! Form would be submitted.");
                    // Form submission logic would go here
                    // document.querySelector('form').submit();
                } else {
                    alert("Please complete all required fields for all students before submitting.");
                }
            });

            function updateActiveState(activeIndex) {
                studentBoxes.forEach((box, idx) => {
                    if (idx === activeIndex) {
                        box.classList.add('active');
                    } else {
                        box.classList.remove('active');
                    }
                });
            }

            function updateNavigationButtons() {
                const count = parseInt(studentCount.value);

                // Hide both buttons if only one student
                if (count <= 1) {
                    previousBtn.style.display = 'none';
                    nextBtn.style.display = 'none';
                    return;
                }

                // Show/hide Previous button based on current student
                previousBtn.style.display = currentStudentIndex === 0 ? 'none' : '';

                // Show/hide Next button based on current student
                nextBtn.style.display = currentStudentIndex === count - 1 ? 'none' : '';
            }

            function updateStatusHeading() {
                const count = parseInt(studentCount.value);
                statusHeading.textContent = `Student ${currentStudentIndex + 1} of ${count}`;
            }

            function createStudentForm(index) {
                // If the form already exists, don't recreate it
                if (studentForms[index - 1]) {
                    return;
                }

                // Clone the first student form as a template
                if (index === 1) {
                    // For the first student, use the existing form
                    studentForms[0] = document.querySelector('.student-form');
                } else {
                    // For subsequent students, clone the first form
                    const newForm = studentForms[0].cloneNode(true);

                    // Update IDs and names to be unique for this student
                    newForm.querySelectorAll('[id]').forEach(element => {
                        if (element.id.includes('_1')) {
                            const baseId = element.id.split('_1')[0];
                            element.id = `${baseId}_${index}`;
                        }
                    });

                    // Update form heading
                    const heading = newForm.querySelector('h5');
                    if (heading) {
                        heading.textContent = `Student ${index} Information`;
                    }

                    // Clear input values
                    newForm.querySelectorAll('input[type="text"], input[type="date"]').forEach(input => {
                        input.value = '';
                    });

                    // Reset radio buttons
                    newForm.querySelectorAll('input[type="radio"]').forEach(radio => {
                        radio.checked = false;

                        // Update name attribute for radio groups
                        if (radio.name.includes('[0]')) {
                            radio.name = `gender[${index - 1}]`;
                        }
                    });

                    // Reset dropdowns
                    newForm.querySelectorAll('select').forEach(select => {
                        select.selectedIndex = 0;
                    });

                    // Initially hide the form
                    newForm.style.display = 'none';

                    // Add to DOM
                    studentFormsContainer.appendChild(newForm);

                    // Store reference
                    studentForms[index - 1] = newForm;
                }
            }

            function showCurrentStudentForm() {
                studentForms.forEach((form, index) => {
                    if (index === currentStudentIndex) {
                        form.style.display = 'block';
                    } else {
                        form.style.display = 'none';
                    }
                });
            }

            function validateCurrentForm() {
                return validateForm(currentStudentIndex + 1);
            }

            function validateForm(studentNumber) {
                let isValid = true;

                // Text fields validation (only letters and spaces)
                const studentName = document.getElementById(`studentName_${studentNumber}`);
                const studentNameError = document.getElementById(`studentNameError_${studentNumber}`);
                const fatherName = document.getElementById(`fatherName_${studentNumber}`);
                const fatherNameError = document.getElementById(`fatherNameError_${studentNumber}`);

                const nameRegex = /^[A-Za-z\s]+$/;

                // Student name validation
                if (!studentName.value.trim()) {
                    studentNameError.textContent = "Student name is required";
                    isValid = false;
                } else if (!nameRegex.test(studentName.value)) {
                    studentNameError.textContent = "Only alphabets and spaces are allowed";
                    isValid = false;
                } else {
                    studentNameError.textContent = "";
                }

                // Father's name validation
                if (!fatherName.value.trim()) {
                    fatherNameError.textContent = "Father's name is required";
                    isValid = false;
                } else if (!nameRegex.test(fatherName.value)) {
                    fatherNameError.textContent = "Only alphabets and spaces are allowed";
                    isValid = false;
                } else {
                    fatherNameError.textContent = "";
                }

                // Gender validation
                const genderError = document.getElementById(`genderError_${studentNumber}`);
                const genderSelected = document.querySelector(`input[name="gender[${studentNumber - 1}]"]:checked`);

                if (!genderSelected) {
                    genderError.textContent = "Please select a gender";
                    isValid = false;
                } else {
                    genderError.textContent = "";
                }

                // Date validation
                const admissionDate = document.getElementById(`admissionDate_${studentNumber}`);
                const admissionDateError = document.getElementById(`admissionDateError_${studentNumber}`);

                if (!admissionDate.value) {
                    admissionDateError.textContent = "Admission date is required";
                    isValid = false;
                } else {
                    admissionDateError.textContent = "";
                }

                // Dropdown validation
                const dropdowns = [
                    { id: `admissionType_${studentNumber}`, errorId: `admissionTypeError_${studentNumber}`, label: "Admission type" },
                    { id: `schoolType_${studentNumber}`, errorId: `schoolTypeError_${studentNumber}`, label: "School type" },
                    { id: `studentClass_${studentNumber}`, errorId: `studentClassError_${studentNumber}`, label: "Class" },
                    { id: `city_${studentNumber}`, errorId: `cityError_${studentNumber}`, label: "City" },
                    { id: `state_${studentNumber}`, errorId: `stateError_${studentNumber}`, label: "State" },
                    { id: `zone_${studentNumber}`, errorId: `zoneError_${studentNumber}`, label: "Zone" }
                ];

                dropdowns.forEach(dropdown => {
                    const select = document.getElementById(dropdown.id);
                    const errorElement = document.getElementById(dropdown.errorId);

                    if (select.selectedIndex === 0 || select.value === "") {
                        errorElement.textContent = `Please select a ${dropdown.label}`;
                        isValid = false;
                    } else {
                        errorElement.textContent = "";
                    }
                });

                return isValid;
            }

            // Initialize the form
            updateActiveState(0);
            updateStatusHeading();
            showCurrentStudentForm();
        });
    </script>

    <script>
        const stateCityMap = {
            Gujarat: ['Surat', 'Ahmedabad', 'Vadodara'],
            Maharashtra: ['Mumbai', 'Pune', 'Nagpur'],
            Rajasthan: ['Jaipur', 'Udaipur', 'Jodhpur']
        };

        const studentContainer = document.getElementById("students-container");
        const numStudentsSelect = document.getElementById("num-students");
        const prevBtn = document.getElementById("prev-btn");
        const nextBtn = document.getElementById("next-btn");
        const resetBtn = document.getElementById("reset-all-btn");
        const submitBtn = document.getElementById("submit-all-btn");

        let currentStudentIndex = 0;
        let studentForms = [];

        numStudentsSelect.addEventListener("change", () => {
            const num = parseInt(numStudentsSelect.value);
            studentForms = [];
            studentContainer.innerHTML = "";
            for (let i = 0; i < num; i++) {
                const form = createStudentForm(i);
                studentForms.push(form);
                studentContainer.appendChild(form);
            }
            showForm(0);
            updateNavButtons();
        });

        function createStudentForm(index) {
            const div = document.createElement("div");
            div.className = "student-form";
            div.dataset.index = index;
            div.innerHTML = `
            <h3>Student ${index + 1}</h3>
            <input type="text" placeholder="First Name" class="first-name" />
            <input type="text" placeholder="Last Name" class="last-name" />
            <input type="email" placeholder="Email" class="email" />
            <input type="text" placeholder="Phone (10-digit)" class="phone" />
            <input type="text" placeholder="Address" class="address" />
            
            <select class="state">
                <option value="">Select State</option>
                ${Object.keys(stateCityMap).map(state => `<option value="${state}">${state}</option>`).join('')}
            </select>

            <select class="city">
                <option value="">Select City</option>
            </select>

            <input type="text" placeholder="PIN Code (6-digit)" class="pin" />
        `;

            // Populate city dropdown when state changes
            const stateSelect = div.querySelector(".state");
            const citySelect = div.querySelector(".city");

            stateSelect.addEventListener("change", () => {
                const cities = stateCityMap[stateSelect.value] || [];
                citySelect.innerHTML = `<option value="">Select City</option>`;
                cities.forEach(city => {
                    const opt = document.createElement("option");
                    opt.value = city;
                    opt.textContent = city;
                    citySelect.appendChild(opt);
                });
            });

            // Add dynamic validation on inputs
            addDynamicValidation(div);

            return div;
        }

        function addDynamicValidation(form) {
            const inputs = form.querySelectorAll("input, select");

            inputs.forEach(input => {
                input.addEventListener("input", () => {
                    validateForm(form.dataset.index);
                    updateNavButtons();
                });
            });
        }

        function showForm(index) {
            studentForms.forEach((form, i) => {
                form.style.display = i === index ? "block" : "none";
            });
            currentStudentIndex = index;
            updateNavButtons();
        }

        function updateNavButtons() {
            prevBtn.disabled = currentStudentIndex === 0;
            nextBtn.disabled = !validateForm(currentStudentIndex) || currentStudentIndex === studentForms.length - 1;
        }

        prevBtn.addEventListener("click", () => {
            if (currentStudentIndex > 0) {
                showForm(currentStudentIndex - 1);
            }
        });

        nextBtn.addEventListener("click", () => {
            if (validateForm(currentStudentIndex)) {
                if (currentStudentIndex < studentForms.length - 1) {
                    showForm(currentStudentIndex + 1);
                }
            }
        });

        resetBtn.addEventListener("click", () => {
            studentContainer.innerHTML = "";
            studentForms = [];
            numStudentsSelect.value = "";
            currentStudentIndex = 0;
        });

        submitBtn.addEventListener("click", () => {
            const allData = [];
            for (let i = 0; i < studentForms.length; i++) {
                if (!validateForm(i)) {
                    showForm(i);
                    return;
                }
                const form = studentForms[i];
                allData.push({
                    firstName: form.querySelector(".first-name").value.trim(),
                    lastName: form.querySelector(".last-name").value.trim(),
                    email: form.querySelector(".email").value.trim(),
                    phone: form.querySelector(".phone").value.trim(),
                    address: form.querySelector(".address").value.trim(),
                    state: form.querySelector(".state").value,
                    city: form.querySelector(".city").value,
                    pin: form.querySelector(".pin").value.trim()
                });
            }
            console.log("All Students' Data:", allData);
            alert("All forms submitted successfully!");
        });

        function validateForm(index) {
            const form = studentForms[index];
            const firstName = form.querySelector(".first-name").value.trim();
            const lastName = form.querySelector(".last-name").value.trim();
            const email = form.querySelector(".email").value.trim();
            const phone = form.querySelector(".phone").value.trim();
            const address = form.querySelector(".address").value.trim();
            const state = form.querySelector(".state").value;
            const city = form.querySelector(".city").value;
            const pin = form.querySelector(".pin").value.trim();

            let isValid = true;

            // Clear previous errors
            form.querySelectorAll('.error').forEach(err => err.remove());

            // Validate fields
            if (!/^[A-Za-z]{2,}$/.test(firstName)) {
                showError(form, '.first-name', 'Enter a valid first name');
                isValid = false;
            }
            if (!/^[A-Za-z]{2,}$/.test(lastName)) {
                showError(form, '.last-name', 'Enter a valid last name');
                isValid = false;
            }
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                showError(form, '.email', 'Enter a valid email');
                isValid = false;
            }
            if (!/^\d{10}$/.test(phone)) {
                showError(form, '.phone', 'Enter a valid 10-digit phone number');
                isValid = false;
            }
            if (address.length < 5) {
                showError(form, '.address', 'Enter a valid address');
                isValid = false;
            }
            if (!state) {
                showError(form, '.state', 'Select a state');
                isValid = false;
            }
            if (!city) {
                showError(form, '.city', 'Select a city');
                isValid = false;
            }
            if (!/^\d{6}$/.test(pin)) {
                showError(form, '.pin', 'Enter a valid 6-digit PIN');
                isValid = false;
            }

            return isValid;
        }

        function showError(form, fieldSelector, message) {
            const field = form.querySelector(fieldSelector);
            const error = document.createElement('span');
            error.className = 'error';
            error.style.color = 'red';
            error.textContent = message;
            field.insertAdjacentElement('afterend', error);
        }
    </script>

</body>

</html>